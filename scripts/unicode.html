<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>PS4 Symbols</title>
<link rel="icon" type="image/png" href="./img/icon.png" />
<style>
  /* Theme variables (easy to edit) */
  :root{
    --page-pad: 20px;
    --card-w: 160px;
    --card-h: 160px;
    --card-radius: 14px;
    --glass-bg: rgba(255,255,255,0.06);
    --glass-border: rgba(255,255,255,0.06);
    --accent: #ffffff;
    --muted: rgba(255,255,255,0.85);
    --shadow: rgba(0,0,0,0.35);
    --gap: 18px;
    --font-family: "Segoe UI", Roboto, system-ui, -apple-system, "Helvetica Neue", Arial;
  }

  html {
    height: 100%;
  }
  body{
    min-height: 100vh;
    margin:0;
    font-family:var(--font-family);
    color:var(--accent);
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
    background: none; /* remove any background from body – it's handled by fixed divs */
    position: relative; /* ensures proper stacking */
  }

  /* FIXED BACKGROUND IMAGE (stays glued to screen) */
  .bg-fixed {
    position: fixed;
    inset: 0;
    background-image: url('../img/Baek.png');
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    z-index: -2;
  }

  /* overlay to keep contrast – also fixed, but above background */
  .bg-overlay{
    position:fixed;
    inset:0;
    background: linear-gradient(rgba(0,0,0,0.12), rgba(0,0,0,0.28));
    pointer-events:none;
    z-index: -1; /* sits between bg and content */
  }

  /* page layout */
  .wrap{
    min-height:100vh;
    display:flex;
    align-items:flex-start;
    justify-content:center;
    padding:36px 18px;
    box-sizing:border-box;
    position: relative; /* ensure it's above fixed layers */
    z-index: 1;
  }

  .panel{
    width: min(1100px, 96%);
    max-width:1200px;
    margin: 12px 0;
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.06));
    border-radius:18px;
    padding:var(--page-pad);
    box-shadow: 0 10px 40px var(--shadow);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
    border: 1px solid var(--glass-border);
  }

  header.top{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:12px;
    margin-bottom:12px;
  }
  .left-head{
    display:flex;
    flex-direction:column;
  }
  .title{
    font-size:20px;
    font-weight:600;
  }
  .subtitle{ font-size:13px; opacity:0.9; }

  /* search input */
  .search-row{
    display:flex;
    gap:12px;
    align-items:center;
    margin-bottom:12px;
  }
  .search{
    flex:1 1 420px;
    min-width:120px;
    padding:10px 12px;
    border-radius:10px;
    border:1px solid rgba(255,255,255,0.06);
    background: rgba(255,255,255,0.02);
    color:var(--accent);
    outline:none;
    font-size:14px;
    box-shadow: 0 6px 18px rgba(0,0,0,0.18) inset;
  }
  .search::placeholder{ color: rgba(255,255,255,0.6); }

  /* grid of rows (each row contains up to 4 cells) */
  .grid{
    display:flex;
    flex-direction:column;
    gap: var(--gap);
    align-items:stretch;
  }

  .row{
    display:flex;
    gap:14px;
    justify-content:center; /* center 1/2/3 items automatically */
    flex-wrap:nowrap;
  }

  /* card style (square) */
  .card{
    width: var(--card-w);
    height: var(--card-h);
    min-width: var(--card-w);
    min-height: var(--card-h);
    border-radius: var(--card-radius);
    background: var(--glass-bg);
    border: 1px solid var(--glass-border);
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    box-shadow: 0 10px 24px var(--shadow);
    transition: transform 160ms cubic-bezier(.2,.9,.3,1), box-shadow 160ms, background 160ms;
    cursor: pointer;
    user-select: none;
    overflow:hidden;
    position:relative;
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
    padding:10px;
  }

  .card:hover{
    transform: translateY(-6px) scale(1.04);
    box-shadow: 0 18px 48px rgba(0,0,0,0.5);
  }
  .card:active{
    transform: translateY(2px) scale(0.98);
  }

  .glyph{
    font-size:46px;
    line-height:1;
    margin-bottom:8px;
    text-align:center;
    letter-spacing:0.08em;
    user-select: text; /* allow copy */
  }

  .name{
    font-size:13px;
    text-align:center;
    opacity:0.95;
    white-space:nowrap;
    overflow:hidden;
    text-overflow: ellipsis;
    max-width: 86%;
  }

  /* responsive */
  @media (max-width:880px){
    :root{ --card-w: 140px; --card-h:140px; --gap:14px; }
    .panel{ padding:14px; border-radius:12px; }
  }
  @media (max-width:520px){
    :root{ --card-w: 120px; --card-h:120px; --gap:12px; }
    .row{ gap:10px; }
    .title{ font-size:18px; }
    .search { font-size:13px; padding:9px 10px; }
  }

  /* controls and music button */
  .controls{
    display:flex;
    gap:8px;
    align-items:center;
  }
  .btn-ghost{
    padding:8px 12px;
    border-radius:10px;
    border:1px solid rgba(255,255,255,0.06);
    background: rgba(255,255,255,0.02);
    color:var(--accent);
    cursor:pointer;
    font-weight:600;
  }
  .btn-ghost:active{ transform: translateY(1px); }

  .music-control{
    display:inline-flex;
    gap:8px;
    align-items:center;
  }
  .music-btn{
    width:40px;
    height:40px;
    border-radius:10px;
    border:1px solid rgba(255,255,255,0.06);
    background: rgba(255,255,255,0.02);
    display:inline-flex;
    align-items:center;
    justify-content:center;
    cursor:pointer;
    transition: transform 140ms;
    position:relative;
  }
  .music-btn:active{ transform:scale(0.95); }
  .music-btn svg{ width:18px; height:18px; fill:currentColor; color:var(--accent); opacity:0.95; }

  /* when playing but muted fallback is active, show small yellow dot on the control */
  .music-btn.muted::after{
    content: '';
    position: absolute;
    right: 6px;
    bottom: 6px;
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: #f0c419;
    box-shadow: 0 0 6px rgba(240,196,25,0.6);
  }

  .no-results{
    text-align:center;
    padding:18px;
    opacity:0.85;
    font-size:14px;
  }

  .hint{ font-size:12px; opacity:0.85; margin-top:10px; text-align:center; }
</style>
</head>
<body>
  <!-- Fixed background layer – stays glued to viewport -->
  <div class="bg-fixed" aria-hidden="true"></div>
  <!-- Fixed overlay for contrast – also stays glued -->
  <div class="bg-overlay" aria-hidden="true"></div>

  <div class="wrap">
    <div class="panel" role="main" aria-label="Unicode viewer">
      <header class="top">
        <div class="left-head">
          <div class="title">PS4 Unicode</div>
          <div class="subtitle">Click glyph to copy — search updates results live</div>
        </div>

        <div class="controls" aria-hidden="false">
          <button class="btn-ghost" onclick="history.back()">Back</button>
          <div class="music-control" title="Play / Pause background music">
            <div id="musicBtn" class="music-btn" aria-pressed="false" role="button">
              <svg id="musicIcon" viewBox="0 0 24 24" aria-hidden="true"><path d="M8 5v14l11-7z"></path></svg>
            </div>
          </div>
        </div>
      </header>

      <div class="search-row">
        <input id="search" class="search" type="search" placeholder="Search by name or character — live results" aria-label="Search unicode symbols" />
      </div>

      <main>
        <div id="grid" class="grid" aria-live="polite"></div>
        <div id="noResults" class="no-results" style="display:none;">No results</div>
        <div class="hint">Owned by Mexrl</div>
      </main>
    </div>
  </div>

  <!-- Background audio (relative path from scripts/ -> parent music folder) -->
  <audio id="bgAudio" loop preload="auto">
    <source src="../music/bg.mp3" type="audio/mpeg">
  </audio>

<script>
/* Data: label -> glyph */
const items = [
  { name: 'Circle', char: '' },
  { name: 'Cross', char: '' },
  { name: 'Square', char: '' },
  { name: 'Triangle', char: '' },

  { name: 'DPAD Up', char: '' },
  { name: 'DPAD Down', char: '' },
  { name: 'DPAD Left', char: '' },
  { name: 'DPAD Right', char: '' },

  { name: 'L1', char: '' },
  { name: 'L2', char: '' },
  { name: 'L3', char: '' },

  { name: 'R1', char: '' },
  { name: 'R2', char: '' },
  { name: 'R3', char: '' },

  { name: 'Select', char: '' },
  { name: 'Options', char: '' },
  { name: 'PS Button', char: '' },

  { name: 'PSPlus (Gold)', char: '' },
  { name: 'PSPlus (white)', char: '' },
  { name: 'Exclamation', char: '' },
  { name: 'LPAD', char: '' },

  { name: 'RPAD', char: '' },
  { name: 'PS Move', char: '' },
  { name: 'PS2', char: '' },
  { name: 'Movie', char: '' },

  { name: 'Picture', char: '' },
  { name: 'Lock', char: '' },
  { name: 'White Finger', char: '' },
  { name: 'Black Finger', char: '' },

  { name: 'HD', char: '' },
  { name: 'Battery 0', char: '' },
  { name: 'Battery 1', char: '' },
  { name: 'Battery 2', char: '' },

  { name: 'Battery 3', char: '' },
  { name: 'Battery ?', char: '' },
  { name: 'Mic Mute', char: '' },
  { name: 'Speaker 1', char: '' },

  { name: 'Speaker 2', char: '' },
  { name: 'Speaker 3', char: '' },
  { name: 'Speaker 0', char: '' },
  { name: 'Speaker Mute', char: '' },

  { name: 'Headphone', char: '' },
  { name: 'Headphone 2', char: '' },
  { name: 'Speak', char: '' },
  { name: 'New', char: '' },

  { name: 'Balloon', char: '' },
  { name: 'Good', char: '' },
  { name: 'Person', char: '' },
  { name: 'Bronze', char: '' },

  { name: 'Silver', char: '' },
  { name: 'Gold', char: '' },
  { name: 'Platinum', char: '' },
  { name: 'Trophy Star', char: '' },

  { name: 'PS3 Tag', char: '' },
  { name: 'PS4 Tag', char: '' },
  { name: 'PS Vita Tag', char: '' },
  { name: 'PS Camera', char: '' },

  { name: 'PS Logo', char: '' },
  { name: 'PSN Ball', char: '' },
  { name: 'PS Store', char: '' },
  { name: 'PS3 Logo', char: '' },

  { name: 'PS4 Logo', char: '' },
  { name: 'PSN Logo', char: '' },
  { name: 'PSP Logo', char: '' },
  { name: 'PSVITA Logo', char: '' },

  { name: 'White PS Ball', char: '' },
  { name: 'NY', char: '' },
  { name: 'Right Arrow', char: '' },
  { name: 'Cross Mark', char: '' },

  { name: 'Mic', char: '' }
];

/* Build grid: groups of 4; shorter groups are centered automatically */
const grid = document.getElementById('grid');
const noResults = document.getElementById('noResults');
const search = document.getElementById('search');

function buildGrid(list){
  grid.innerHTML = '';
  if(!list.length){
    noResults.style.display = 'block';
    return;
  } else {
    noResults.style.display = 'none';
  }

  for(let i=0; i<list.length; i += 4){
    const group = list.slice(i, i+4);
    const row = document.createElement('div');
    row.className = 'row row-count-' + group.length;
    group.forEach(item => {
      const card = document.createElement('div');
      card.className = 'card';
      card.tabIndex = 0;

      const glyph = document.createElement('div');
      glyph.className = 'glyph';
      glyph.textContent = item.char;

      const name = document.createElement('div');
      name.className = 'name';
      name.textContent = item.name;

      card.appendChild(glyph);
      card.appendChild(name);

      // click or keyboard -> copy glyph
      card.addEventListener('click', () => copyGlyph(item.char, name));
      card.addEventListener('keydown', (e) => {
        if(e.key === 'Enter' || e.key === ' '){
          e.preventDefault();
          card.click();
        }
      });

      row.appendChild(card);
    });
    grid.appendChild(row);
  }
}

/* Copy helpers */
function copyGlyph(char, nameEl){
  if(navigator.clipboard && navigator.clipboard.writeText){
    navigator.clipboard.writeText(char).then(()=>{
      flashCopied(nameEl);
    }).catch(()=> fallbackCopy(char, nameEl));
  } else {
    fallbackCopy(char, nameEl);
  }
}
function fallbackCopy(char, nameEl){
  const ta = document.createElement('textarea');
  ta.value = char;
  ta.style.position = 'fixed';
  ta.style.left = '-9999px';
  document.body.appendChild(ta);
  ta.select();
  try { document.execCommand('copy'); } catch(e){}
  ta.remove();
  flashCopied(nameEl);
}
function flashCopied(nameEl){
  const old = nameEl.textContent;
  nameEl.textContent = 'Copied';
  setTimeout(()=> nameEl.textContent = old, 700);
}

/* Live search (case-insensitive) */
function normalize(s){ return String(s || '').toLowerCase(); }

function filterItems(query){
  if(!query) return items.slice(); // all
  const q = normalize(query);
  // match name or glyph char
  return items.filter(it => normalize(it.name).includes(q) || normalize(it.char).includes(q));
}

search.addEventListener('input', (e) => {
  const q = e.target.value;
  const filtered = filterItems(q);
  buildGrid(filtered);
});

// allow initial focus on search
search.addEventListener('keydown', (e) => {
  if(e.key === 'ArrowDown'){
    // move focus to first card if exists
    const firstCard = document.querySelector('.card');
    if(firstCard){ firstCard.focus(); e.preventDefault(); }
  }
});

/* initialize grid with all items */
buildGrid(items);

/* Background music autoplay + control logic (unmuted try, then muted fallback) */
const audio = document.getElementById('bgAudio');
const musicBtn = document.getElementById('musicBtn');
const musicIcon = document.getElementById('musicIcon');

let isPlaying = false;
let mutedFallback = false;

function updateMusicIcon(){
  if(isPlaying){
    // pause icon
    musicIcon.innerHTML = '<path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"></path>';
    musicBtn.setAttribute('aria-pressed','true');
  } else {
    // play icon
    musicIcon.innerHTML = '<path d="M8 5v14l11-7z"></path>';
    musicBtn.setAttribute('aria-pressed','false');
  }
  if(isPlaying && mutedFallback){
    musicBtn.classList.add('muted');
    musicBtn.title = 'Playing (muted). Interact to unmute / click to pause';
  } else {
    musicBtn.classList.remove('muted');
    musicBtn.title = isPlaying ? 'Playing. Click to pause' : 'Paused. Click to play';
  }
}

async function tryAutoplay(){
  audio.loop = true;
  audio.volume = 0.9;
  audio.muted = false;
  try {
    await audio.play();
    isPlaying = true;
    mutedFallback = false;
    updateMusicIcon();
  } catch(e){
    // try muted fallback
    try {
      audio.muted = true;
      await audio.play();
      isPlaying = true;
      mutedFallback = true;
      updateMusicIcon();
      attachUnmuteOnFirstInteraction();
    } catch(e2){
      // cannot autoplay at all
      isPlaying = false;
      mutedFallback = false;
      updateMusicIcon();
    }
  }
}

function attachUnmuteOnFirstInteraction(){
  function attemptUnmute(){
    if(mutedFallback && audio.muted){
      audio.muted = false;
      audio.play().catch(()=>{});
      mutedFallback = false;
      updateMusicIcon();
    }
    window.removeEventListener('pointerdown', attemptUnmute);
    window.removeEventListener('keydown', attemptUnmute);
  }
  window.addEventListener('pointerdown', attemptUnmute, { once:true });
  window.addEventListener('keydown', attemptUnmute, { once:true });
}

/* user toggles play/pause */
musicBtn.addEventListener('click', async () => {
  if(isPlaying){
    audio.pause();
    isPlaying = false;
    mutedFallback = false;
    updateMusicIcon();
  } else {
    audio.muted = false;
    try {
      await audio.play();
      isPlaying = true;
      mutedFallback = false;
      updateMusicIcon();
    } catch(e){
      // fallback to muted play
      try {
        audio.muted = true;
        await audio.play();
        isPlaying = true;
        mutedFallback = true;
        updateMusicIcon();
        attachUnmuteOnFirstInteraction();
      } catch(e2){
        isPlaying = false;
        mutedFallback = false;
        updateMusicIcon();
      }
    }
  }
});

/* also unmute on any interaction if we are in muted fallback */
window.addEventListener('pointerdown', () => {
  if(isPlaying && mutedFallback && audio.muted){
    audio.muted = false;
    mutedFallback = false;
    updateMusicIcon();
  }
});
window.addEventListener('keydown', () => {
  if(isPlaying && mutedFallback && audio.muted){
    audio.muted = false;
    mutedFallback = false;
    updateMusicIcon();
  }
});

/* start autoplay attempt */
tryAutoplay();
</script>
</body>
</html>